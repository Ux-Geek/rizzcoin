<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rizz</title>

  <!-- Instrument Serif (Google Fonts) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg: #FFD550;
      --ink: #141318;
      --glass: rgba(255, 255, 255, 0.62);
      --glass2: rgba(255, 255, 255, 0.48);
      --border: rgba(255, 255, 255, 0.12);
      --shadow: 0 18px 35px rgba(20, 19, 24, 0.18);
      --radius: 20px;
      --pad: 20px;
      --max: 640px;
    }

    * {
      box-sizing: border-box;
    }

    html,
    body {
      height: 100%;
    }

    body {
      margin: 0;
      background: var(--bg);
      color: var(--ink);
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      overflow-x: hidden;
    }

    /* subtle premium texture */
    .bgFX {
      position: fixed;
      inset: 0;
      pointer-events: none;
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(255, 255, 255, 0.35), transparent 55%),
        radial-gradient(900px 500px at 80% 30%, rgba(255, 255, 255, 0.22), transparent 55%),
        radial-gradient(900px 700px at 50% 90%, rgba(20, 19, 24, 0.06), transparent 60%);
      mix-blend-mode: overlay;
    }

    .wrap {
      max-width: var(--max);
      margin: 0 auto;
      padding: calc(var(--pad) + 6px) var(--pad) var(--pad);
      display: flex;
      flex-direction: column;
      gap: 16px;
      min-height: 100%;
    }

    .header {
      font-family: "Instrument Serif", serif;
      font-size: clamp(36px, 6vw, 56px);
      line-height: 1.05;
      letter-spacing: -0.02em;
      margin-top: 10px;
    }

    .btn {
      height: 62px;
      width: 100%;
      border: 1px solid #333;
      border-radius: 12px;
      background: #FFF;
      /* White background */
      color: var(--ink);
      /* Dark text */
      font-weight: 600;
      /* SF Pro will render as a medium/semibold; visually it reads ‚Äúpremium‚Äù */
      font-size: 16px;
      letter-spacing: 0.01em;
      cursor: pointer;
      box-shadow: var(--shadow);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      transition: transform 120ms ease, box-shadow 120ms ease, filter 120ms ease;
    }

    .btn:active {
      transform: translateY(1px) scale(0.995);
      box-shadow: 0 10px 18px rgba(20, 19, 24, 0.18);
      filter: brightness(0.98);
    }

    .spark {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      background: var(--bg);
      box-shadow: 0 0 0 6px rgba(255, 213, 80, 0.18);
    }

    .card {
      border-radius: var(--radius);
      background: var(--glass);
      border: 1px solid var(--border);
      box-shadow: 0 12px 26px rgba(20, 19, 24, 0.10);
      padding: 16px;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }

    .output {
      transform-origin: top;
      transition: transform 180ms ease, opacity 180ms ease;
      opacity: 0;
      transform: translateY(6px) scale(0.99);
    }

    .output.show {
      opacity: 1;
      transform: translateY(0) scale(1);
    }

    .rizzText {
      font-size: 26px;
      /* Bigger */
      font-weight: 700;
      /* Bolder */
      line-height: 1.35;
      margin: 0 0 16px;
      letter-spacing: -0.01em;
    }

    .responseLoader {
      display: none;
      font-family: "Instrument Serif", serif;
      font-size: 32px;
      margin: 0 0 16px;
      font-weight: 400;
      color: rgba(20, 19, 24, 0.3);
      background: linear-gradient(110deg,
          rgba(20, 19, 24, 0.3) 40%,
          rgba(255, 255, 255, 0.9) 50%,
          rgba(20, 19, 24, 0.3) 60%);
      background-size: 200% 100%;
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shimmer 1s infinite linear;
    }

    .responseLoader.active {
      display: block;
    }

    /* History Widget */
    .historyWidget {
      position: fixed;
      bottom: 24px;
      right: 24px;
      z-index: 100;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 12px;
    }

    .historyList {
      width: 300px;
      max-width: 80vw;
      max-height: 50vh;
      overflow-y: auto;
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 8px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);

      transform-origin: bottom right;
      transform: scale(0);
      opacity: 0;
      transition: transform 250ms cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 200ms ease;
      pointer-events: none;
    }

    .historyList.active {
      transform: scale(1);
      opacity: 1;
      pointer-events: all;
    }

    .historyBtn {
      height: 56px;
      background: #FFF;
      color: var(--ink);
      border: 1px solid rgba(0, 0, 0, 0.08);
      border-radius: 28px;
      padding: 0 16px;
      display: flex;
      align-items: center;
      gap: 0;
      cursor: pointer;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
      transition: all 300ms cubic-bezier(0.4, 0.0, 0.2, 1);
      overflow: hidden;
      max-width: 56px;
      /* Icon only */
      white-space: nowrap;
    }

    /* Hover expand effect */
    .historyBtn:hover {
      max-width: 140px;
      /* Expand to show text */
      gap: 10px;
      padding-right: 24px;
    }

    .historyIcon {
      width: 24px;
      height: 24px;
      flex-shrink: 0;
    }

    .historyLabel {
      font-weight: 600;
      font-size: 15px;
      opacity: 0;
      transform: translateX(10px);
      transition: all 200ms ease;
    }

    .historyBtn:hover .historyLabel {
      opacity: 1;
      transform: translateX(0);
    }

    .hItem {
      padding: 12px 14px;
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.4);
      margin-bottom: 6px;
      font-size: 14px;
      line-height: 1.4;
      cursor: pointer;
      transition: background 150ms ease;
      border: 1px solid transparent;
    }

    .hItem:hover {
      background: #FFF;
      border-color: rgba(0, 0, 0, 0.05);
    }

    .hItem:active {
      transform: scale(0.98);
    }

    .hItem:last-child {
      margin-bottom: 0;
    }

    .emptyState {
      padding: 20px;
      text-align: center;
      opacity: 0.6;
      font-size: 13px;
    }

    .actions {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .pill {
      height: 40px;
      padding: 0 14px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.55);
      color: var(--ink);
      font-size: 14px;
      cursor: pointer;
      transition: transform 120ms ease, background 120ms ease;
    }

    .pill:active {
      transform: translateY(1px);
      background: rgba(255, 255, 255, 0.65);
    }

    .subhead {
      font-size: 13px;
      opacity: 0.75;
      margin: 10px 0 0;
    }

    .copyMini {
      white-space: nowrap;
      font-size: 12px;
      opacity: 0.75;
    }

    .toast {
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      background: rgba(20, 19, 24, 0.88);
      color: #fff;
      padding: 10px 14px;
      border-radius: 999px;
      font-size: 13px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 180ms ease, transform 180ms ease;
    }

    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(-4px);
    }

    /* Loader */
    .loader {
      position: fixed;
      inset: 0;
      z-index: 9999;
      background: var(--bg);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: opacity 300ms ease, visibility 300ms ease;
    }

    .loader.hidden {
      opacity: 0;
      visibility: hidden;
    }

    .loaderText {
      font-family: "Instrument Serif", serif;
      font-size: 64px;
      font-weight: 400;
      color: rgba(20, 19, 24, 0.3);
      /* dimmed base */
      position: relative;
      overflow: hidden;
      /* moving gradient for shimmer */
      background: linear-gradient(110deg,
          rgba(20, 19, 24, 0.3) 40%,
          rgba(255, 255, 255, 0.9) 50%,
          rgba(20, 19, 24, 0.3) 60%);
      background-size: 200% 100%;
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: shimmer 1.5s infinite linear;
    }

    @keyframes shimmer {
      0% {
        background-position: 150% 0;
      }

      100% {
        background-position: -50% 0;
      }
    }

    @media (min-width: 900px) {
      .wrap {
        padding-top: 34px;
        gap: 18px;
      }

      .btn {
        height: 64px;
        font-size: 16px;
      }

      .rizzText {
        font-size: 28px;
        /* Even bigger on desktop */
      }
    }
  </style>
</head>

<body>
  <!-- Loader -->
  <div class="loader" id="loader">
    <div class="loaderText">Rizz</div>
  </div>

  <div class="bgFX"></div>

  <main class="wrap">
    <div class="header">Rizz</div>

    <button class="btn" id="genBtn">
      <span class="spark" aria-hidden="true"></span>
      Generate Rizz
    </button>

    <section class="card output" id="outputCard" aria-live="polite">
      <div class="responseLoader" id="responseLoader">Rizzing...</div>
      <p class="rizzText" id="rizzText">Tap ‚ÄúGenerate Rizz‚Äù to get a line.</p>
      <div class="actions">
        <button class="pill" id="copyBtn" type="button">Copy</button>
        <button class="pill" id="saveBtn" type="button">Save to history</button>
      </div>
      <p class="subhead">Keep it respectful. Confidence > cringe.</p>
    </section>
  </main>

  <!-- Floating History Widget -->
  <div class="historyWidget">
    <div class="historyList" id="historyList"></div>
    <button class="historyBtn" id="historyBtn">
      <svg class="historyIcon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
      <span class="historyLabel">History</span>
    </button>
  </div>

  <div class="toast" id="toast">Copied ‚úì</div>

  <script>
    const LINES = [
      "I‚Äôm not trying to be extra‚Ä¶ but you just raised the standard in here.",
      "Quick question‚Äîare you always this effortless, or am I just lucky today?",
      "You‚Äôve got that calm confidence‚Ä¶ it‚Äôs dangerous.",
      "I was gonna play it cool, but you‚Äôre making it hard to pretend I didn‚Äôt notice.",
      "If good energy had a face‚Ä¶ yeah, it‚Äôd be you.",
      "Not to interrupt your day, but you just became the highlight.",
      "You look like someone who makes ordinary moments feel expensive.",
      "I‚Äôm normally focused‚Ä¶ but you‚Äôve officially stolen the agenda.",
      "I‚Äôm not flirting. I‚Äôm just being honest‚Äîyou‚Äôre a vibe.",
      "You‚Äôve got that ‚Äòmain character‚Äô aura. I respect it."
    ];

    const ICONS = ["‚ú®", "üî•", "üí´", "‚ö°Ô∏è", "üíé", "üéØ", "üå∂Ô∏è"];

    const genBtn = document.getElementById("genBtn");
    const copyBtn = document.getElementById("copyBtn");
    const saveBtn = document.getElementById("saveBtn");

    // History elements
    const historyBtn = document.getElementById("historyBtn");
    const historyList = document.getElementById("historyList");

    const outputCard = document.getElementById("outputCard");
    const rizzText = document.getElementById("rizzText");
    const responseLoader = document.getElementById("responseLoader");
    const toast = document.getElementById("toast");
    const loader = document.getElementById("loader");

    // Remove loader after delay
    window.addEventListener("load", () => {
      setTimeout(() => {
        loader.classList.add("hidden");
        // fully remove from DOM after transition
        setTimeout(() => {
          loader.remove();
        }, 300);
      }, 3000); // 3s delay as requested
    });

    const STORAGE_KEY = "rizz_history_v1";

    function triggerHaptic() {
      if (navigator.vibrate) {
        navigator.vibrate(10);
      }
    }

    function showToast(text) {
      toast.textContent = text;
      toast.classList.add("show");
      setTimeout(() => toast.classList.remove("show"), 1100);
    }

    function getHistory() {
      try {
        return JSON.parse(localStorage.getItem(STORAGE_KEY) || "[]");
      } catch {
        return [];
      }
    }

    function setHistory(items) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(items.slice(0, 30)));
    }

    function renderHistory() {
      const items = getHistory();
      historyList.innerHTML = ""; // target new list

      if (items.length === 0) {
        const empty = document.createElement("div");
        empty.className = "emptyState";
        empty.textContent = "No rizz saved yet.";
        historyList.appendChild(empty);
        return;
      }

      items.forEach((line) => {
        const row = document.createElement("div");
        row.className = "hItem";
        row.textContent = line;

        // Interaction: Load into main view
        row.addEventListener("click", () => {
          triggerHaptic();
          // Load text
          rizzText.textContent = line;
          rizzText.style.display = 'block';
          outputCard.classList.add("show");

          // Optionally close history?
          // historyList.classList.remove("active"); 
          // Keeping it open feels fine too, user might be browsing.
        });
        historyList.appendChild(row);
      });
    }

    function pickLine() {
      const i = Math.floor(Math.random() * LINES.length);
      const icon = ICONS[Math.floor(Math.random() * ICONS.length)];
      return `\${icon} \${LINES[i]}`; // Correctly using template literal now
    }

    genBtn.addEventListener("click", () => {
      triggerHaptic();

      // UI Reset
      outputCard.classList.add("show");
      rizzText.style.display = 'none';
      responseLoader.classList.add('active');

      // Mimic API/Think time
      setTimeout(() => {
        responseLoader.classList.remove('active');
        rizzText.style.display = 'block';

        const line = pickLine();
        rizzText.textContent = line;
      }, 1500); // 1.5s "Rizzing" delay
    });

    copyBtn.addEventListener("click", async () => {
      triggerHaptic();
      let text = rizzText.textContent || "";
      if (!text || text.includes("Tap ‚ÄúGenerate")) return;

      // clean icon for clipboard? User usually wants the text. 
      // but "copy toast" implies exact copy. I'll keep the icon for vibe.
      // Wait, actually user propbably wants the rizz not the emoji.
      // I'll strip the leading emoji + space for copy.
      text = text.replace(/^[‚ú®üî•üí´‚ö°Ô∏èüíéüéØüå∂Ô∏è]\s*/, '');

      await navigator.clipboard.writeText(text);
      showToast("Copied ‚úì");
    });

    saveBtn.addEventListener("click", () => {
      triggerHaptic();
      const text = rizzText.textContent || "";
      if (!text || text.includes("Tap ‚ÄúGenerate")) return;

      const items = getHistory();
      // prevent dupes at top
      const next = [text, ...items.filter(x => x !== text)];
      setHistory(next);
      renderHistory();
      showToast("Saved ‚úì");

      // Open history to show it saved?
      historyList.classList.add("active");
    });

    // Toggle History
    historyBtn.addEventListener("click", () => {
      triggerHaptic();
      historyList.classList.toggle("active");
    });

    renderHistory();
  </script>
</body>

</html>